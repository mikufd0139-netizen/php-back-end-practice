<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop - é¦–é¡µ</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="logo">ğŸ›’ Shop</a>
        <div class="nav-links" id="navLinks">
            <!-- JS åŠ¨æ€å¡«å…… -->
        </div>
    </nav>

    <div class="container">
        <h1>æ¬¢è¿æ¥åˆ° Shop</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ PHP åŸç”Ÿå¼€å‘çš„ç”µå•†ç³»ç»Ÿæ¼”ç¤º
        </p>
        <div id="welcomeArea">
            <!-- JS åŠ¨æ€å¡«å…… -->
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            updateNavbar();
            updateWelcome();
        });

        // æ›´æ–°å¯¼èˆªæ 
        function updateNavbar() {
            const navLinks = document.getElementById('navLinks');
            
            if (Auth.isLoggedIn()) {
                const user = Auth.getUser();
                navLinks.innerHTML = `
                    <a href="profile.html">ğŸ‘¤ ${user.username}</a>
                    <a href="#" onclick="handleLogout()">é€€å‡º</a>
                `;
            } else {
                navLinks.innerHTML = `
                    <a href="login.html">ç™»å½•</a>
                    <a href="register.html">æ³¨å†Œ</a>
                `;
            }
        }

        // æ›´æ–°æ¬¢è¿åŒºåŸŸ
        function updateWelcome() {
            const welcomeArea = document.getElementById('welcomeArea');
            
            if (Auth.isLoggedIn()) {
                const user = Auth.getUser();
                welcomeArea.innerHTML = `
                    <p style="text-align: center; margin-bottom: 20px;">
                        ä½ å¥½ï¼Œ<strong>${user.username}</strong>ï¼
                    </p>
                    <a href="profile.html" class="btn btn-primary">è¿›å…¥ä¸ªäººä¸­å¿ƒ</a>
                `;
            } else {
                welcomeArea.innerHTML = `
                    <a href="login.html" class="btn btn-primary" style="margin-bottom: 10px;">ç«‹å³ç™»å½•</a>
                    <p class="form-footer">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<a href="register.html">ç«‹å³æ³¨å†Œ</a></p>
                `;
            }
        }

        // å¤„ç†ç™»å‡º
        async function handleLogout() {
            const result = await API.logout();
            Auth.clearUser();
            window.location.reload();
        }
    </script>
</body>
</html>
